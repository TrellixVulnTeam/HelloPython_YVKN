/**
 *  第三方接入统一接口调用，developed by Jimmy Song at 2013/06/27
 * 1.0 初始
 * @version 1.0
 */
KISSY.add("xh/connection/1.0/index",function(a,b,c){KISSY.ConnectionConfig=KISSY.ConnectionConfig||{},c.extend(KISSY.ConnectionConfig,{add:function(a){var d,e,f,g,h,b=void 0;for(a instanceof Array?b=a:(b=[],b.push(a)),d=0,e=0;e<b.length;e++)f=b[e],g={name:null,overwrite:!1,version:null,init:function(){},login:function(){},logout:function(){},logstatus:function(){}},c.extend(g,f,!0),/[a-zA-Z]+[a-zA-Z0-9]*/gi.test(g.name)&&(h=this.Connection,(!h[g.name]||g.overwrite)&&(h[g.name]={},c.extend(h[g.name],g,!0),d++));return d},Connection:{}},!0);var d={};return c.extend(d,{initd:{name:{status:100,conn:!1,queue:[]}},getId:function(a){return this.initd[a]},get:function(a){var b=KISSY.ConnectionConfig.Connection;return b[a]},init:function(a,b){var e,f,g,d=this.get(a);return d?(e={success:function(){},error:function(){}},c.extend(e,b,!0),f=this.getId(a),g=function(a){a.conn.init({success:function(){a.status=200,e.success()},error:function(){a.status=400,e.error()}}),a.status=100},f?f.status:(f={status:100,conn:d,queue:[]},this.initd[a]?c.extend(this.initd[a],f,!0):this.initd[a]=f,g(f),f.status)):(e.error(-200),-200)},login:function(a,b){var e,f,d=this.get(a);return d?(e={success:function(){},error:function(){},loading:function(){}},c.extend(e,b),f=this.init(a),200!=f?(e.loading(),!1):(d.login(e),!0)):!1},logout:function(a,b){var e,f,d=this.get(a);return d?(e={success:function(){},error:function(){},loading:function(){}},c.extend(e,b),f=this.init(a),200!=f?(e.loading(),!1):(d.logout(e),!0)):!1},logstatus:function(a,b){var e,f,d=this.get(a);return d?(e={success:function(){},error:function(){},loading:function(){}},c.extend(e,b),f=this.init(a),200!=f?(e.loading(),!1):(d.logstatus(e),!0)):!1}}),d},{requires:["node","xh/common/1.0/lang"]});