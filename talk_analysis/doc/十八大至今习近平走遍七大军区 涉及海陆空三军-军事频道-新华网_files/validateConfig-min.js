/**
 * 验证插件，developed by Jimmy Song at 2013/06/20
 * 1.1 修改框架配置结构，扩展动态添加配置以及扩展接口
 * @version 1.1
 */
KISSY.add("xh/common/validateConfig",function(a,b,c,d){var f,e=d.all;return KISSY.ValidateConfig=KISSY.ValidateConfig||{configs:{},tips:{},patterns:{}},b.extend(KISSY.ValidateConfig,{Patterns:{integer:/^-?[0-9][0-9]*$/,email:/^([a-zA-Z0-9_-]\.?)+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/}},!0),b.extend(KISSY.ValidateConfig,{config:function(a){b.extend(KISSY.ValidateConfig,a,!0)},add:function(a){var d,e,f,g,h,i,c=void 0;for(a instanceof Array?c=a:(c=[],c.push(a)),d=0,e=0;e<c.length;e++)f=c[e],g={name:null,exec:function(){},tip:null,overwrite:!1},b.extend(g,f,!0),/[a-zA-Z]+[a-zA-Z0-9]*/gi.test(g.name)&&(h=this.Validate.configs,i=this.Validate.tips,(!h[g.name]||g.overwrite)&&(h[g.name]=g.exec,i[g.name]=g.tip,d++));return d},patterns:function(a){return b.extend(this.Patterns,a,!0),this.Patterns},Validate:{configs:{trim:function(a,b){return a.val(b=c.trim(b)),!0},required:function(a,b,d){return d?null==b||""==c.trim(b)?!1:!0:!0},maxlength:function(a,b,d){return null==b?!1:(a.val(b=c.trim(b)),b.length<=d)},minlength:function(a,b,d){return null==b?!1:(a.val(b=c.trim(b)),b.length>=d)},between:function(a,b,d){return null==b?!1:(a.val(b=c.trim(b)),b.length>=d[0]&&b.length<=d[1])},integer:function(a,b,d){if(!d)return!0;var e=new RegExp(KISSY.ValidateConfig.Patterns.integer);return e.test(c.trim(b))},email:function(a,b,d){if(!d)return!0;var e=new RegExp(KISSY.ValidateConfig.Patterns.email);return e.test(c.trim(b))},match:function(a,b,d){if(!d)return!0;var e=new RegExp(d);return e.test(c.trim(b))},equals:function(a,b,c){if(!c)return!0;var d=e(c).val();return d==b},ajax:function(a,c,d,e){if("object"!=typeof d)return!0;var f={};return b.extend(f,d,!0),d.getData&&"function"==typeof d.getData&&(f.data=d.getData()),f.complete=function(){return function(a,c,f){b.queueShift("validate-ajax"),c.indexOf("error")>=0&&(c="error"),e.complete(d.complete(a,c,f),c)}}(),f.timeout=d.timeout?d.timeout:5,b.queue({id:"validate-ajax",fn:function(a){e.IO(a)},params:f,run:!0}),"ajax"}},tips:{required:"必须填写",maxlength:"文本最大长度为{0}",minlength:"文本最小长度为{0}",between:"文本长度必须在<strong>{0}</strong>和<strong>{1}</strong>之间",integer:"必须是整数",email:"必须是邮箱地址",match:"规则不匹配",equals:"两个值不相同",ajax:{timeout:"请求超时",success:"填写信息错误",error:"网络异常"}}}},!0),f=KISSY.ValidateConfig},{requires:["xh/common/1.0/lang","xh/common/1.0/text","node"]});